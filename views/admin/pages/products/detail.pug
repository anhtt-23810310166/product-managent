extends ../../layouts/default.pug
include ../../mixins/page-header.pug

block main
  +pageHeader("Chi tiết sản phẩm", product.title)
    a.btn-submit(href=`${prefixAdmin}/products/edit/${product._id}`)
      i.fas.fa-edit
      |  Chỉnh sửa

  .admin-form-card
    .detail-layout
      .detail-main
        .detail-section
          h3.detail-section-title Thông tin sản phẩm
          .detail-grid
            .detail-item
              .detail-label Tên sản phẩm
              .detail-value= product.title

            .detail-item
              .detail-label Mô tả
              .detail-value!= product.description || "Chưa có mô tả"

        .detail-section
          h3.detail-section-title Giá & Kho hàng
          .detail-grid.detail-grid-3
            .detail-item
              .detail-label Giá gốc
              .detail-value.detail-price
                = product.price ? product.price.toLocaleString() + " VNĐ" : "0 VNĐ"
            .detail-item
              .detail-label Giảm giá
              .detail-value
                = product.discountPercentage ? product.discountPercentage + "%" : "0%"
            .detail-item
              .detail-label Giá sau giảm
              - var finalPrice = product.price ? Math.round(product.price * (1 - (product.discountPercentage || 0) / 100) / 1000) * 1000 : 0
              .detail-value.detail-price= finalPrice.toLocaleString() + " VNĐ"
            .detail-item
              .detail-label Số lượng tồn kho
              .detail-value
                span.stock-badge(
                  class=(product.stock > 0 ? "in-stock" : "out-stock")
                )= product.stock || 0
            .detail-item
              .detail-label Vị trí
              .detail-value= product.position || "Chưa đặt"

        .detail-section
          h3.detail-section-title Danh mục
          .detail-grid
            .detail-item
              .detail-label Danh mục sản phẩm
              .detail-value
                if category
                  a.detail-parent-link(href=`${prefixAdmin}/product-category/detail/${category._id}`)= category.title
                else
                  span.text-muted Chưa phân loại

        .detail-section
          h3.detail-section-title Trạng thái
          .detail-grid
            .detail-item
              .detail-label Trạng thái
              .detail-value
                if product.status === "active"
                  span.status-badge.status-active Hoạt động
                else
                  span.status-badge.status-inactive Dừng hoạt động

      .detail-side
        .detail-section
          h3.detail-section-title Ảnh
          if product.thumbnail
            img.detail-thumbnail(
              src=product.thumbnail
              alt=product.title
            )
          else
            .detail-no-image
              i.fas.fa-image
              p Chưa có ảnh

    .form-actions
      a.btn-cancel(href=`${prefixAdmin}/products`) Quay lại
      a.btn-submit(href=`${prefixAdmin}/products/edit/${product._id}`)
        i.fas.fa-edit
        |  Chỉnh sửa
