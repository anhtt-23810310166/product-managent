//- =============================================
//- Product Card Mixin
//- Dùng chung cho home page, product list, v.v.
//- =============================================

mixin productCard(product)
  .card.tz-product-card.border-0.shadow-sm
    .tz-product-badges
      if product.discountPercentage > 0
        .tz-card-badge-discount -#{product.discountPercentage}%
      if product.featured == "1"
        .tz-card-badge-new Hot
      
    .tz-product-image-wrapper(style="position: relative;")
      a(href=`/products/detail/${product.slug}`)
        img.card-img-top.p-3(src=(product.thumbnail || "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?q=80&w=600&auto=format&fit=crop") class="tz-auto-9bddc1")
      
      if product.stock > 0
        form.tz-cart-form(action=`/cart/add/${product._id}` method="POST")
          input(type="hidden" name="quantity" value="1")
          button.tz-cart-btn(type="submit" title="Thêm vào giỏ hàng")
            i.fas.fa-cart-shopping
            
    .card-body.pt-3.pb-3.px-3.d-flex.flex-column
      h6.card-title.tz-product-title.mb-1(class="tz-auto-2704c1")
        a.text-dark(href=`/products/detail/${product.slug}`)= product.title
      
      .mt-0
        if product.discountPercentage > 0
          - const newPrice = Math.round(product.price * (1 - product.discountPercentage / 100))
          .tz-price-blue.font-weight-bold(class="tz-auto-94b033") #{newPrice.toLocaleString('vi-VN')}₫
          small.text-muted(class="tz-auto-dea443") #{product.price.toLocaleString('vi-VN')}₫
        else
          .tz-price-blue.font-weight-bold(class="tz-auto-94b033") #{product.price ? product.price.toLocaleString('vi-VN') + '₫' : 'Liên hệ'}
          small(class="tz-auto-c70adc") &nbsp;

