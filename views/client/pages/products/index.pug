extends ../../layouts/default

block main
  .container.py-4
    //- Page header
    .d-flex.justify-content-between.align-items-center.mb-4
      .page-header-left
        h2.page-title Danh sách sản phẩm

    //- Product grid
    if products && products.length > 0
      .row
        each product in products
          .col-lg-3.col-md-4.col-sm-6.mb-4
            .card.product-card.h-100.shadow-sm
              //- Product thumbnail
              if product.thumbnail
                .product-img-wrapper
                  img.card-img-top.product-img(src=product.thumbnail alt=product.title)
                  //- Status badge

                  //- Discount badge
                  if product.discountPercentage && product.discountPercentage > 0
                    span.badge.badge-danger.product-discount-badge
                      | -#{product.discountPercentage}%
              else
                .product-img-wrapper
                  .product-img-placeholder
                    i.fas.fa-image.fa-3x.text-muted

                  if product.discountPercentage && product.discountPercentage > 0
                    span.badge.badge-danger.product-discount-badge
                      | -#{product.discountPercentage}%

              .card-body.d-flex.flex-column
                a.card-title.product-title(href=`/products/detail/${product.slug}`)= product.title

                .mt-auto
                  //- Price section
                  .product-price-section.mb-2
                    if product.discountPercentage && product.discountPercentage > 0
                      - var discountedPrice = Math.round(product.price * (1 - product.discountPercentage / 100) / 1000) * 1000
                      span.product-price-current= discountedPrice.toLocaleString() + ' ₫'
                      span.product-price-original.ml-2= product.price.toLocaleString() + ' ₫'
                    else
                      span.product-price-current= product.price ? product.price.toLocaleString() + ' ₫' : 'Liên hệ'






    else
      //- Empty state
      .text-center.py-5
        .empty-state
          i.fas.fa-box-open.fa-4x.text-muted.mb-3
          h4.text-muted Chưa có sản phẩm nào
          p.text-muted Hiện tại chưa có sản phẩm nào để hiển thị.

