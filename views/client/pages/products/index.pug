extends ../../layouts/default
include ../../mixins/category-sidebar.pug
include ../../mixins/product-card.pug

block main
  .container.py-4
    .row
      //- Sidebar danh mục
      .col-lg-3.col-md-4.mb-4
        +categorySidebar("Danh mục sản phẩm", "Tất cả sản phẩm", "/products", productCategories, currentCategory)

      //- Nội dung chính
      .col-lg-9.col-md-8
        .d-flex.justify-content-between.align-items-center.mb-3
          .page-header-left
            if keyword
              h2.page-title Kết quả tìm kiếm: "#{keyword}"
            else
              h2.page-title= currentCategory ? currentCategory.title : 'Tất cả sản phẩm'
          .page-header-right.d-flex.align-items-center
            if keyword
              a.btn-clear-filter.mr-2(href="/products")
                i.fas.fa-times.mr-1
                | Xóa tìm kiếm
            if currentCategory
              a.btn-clear-filter(href=keyword ? `/products?keyword=${keyword}` : '/products')
                i.fas.fa-times.mr-1
                | Bỏ lọc

        if products && products.length > 0
          .home-product-grid
            each product in products
              +productCard(product)
        else
          .text-center.py-5
            .empty-state
              i.fas.fa-box-open.fa-4x.text-muted.mb-3
              h4.text-muted Không có sản phẩm nào
              if currentCategory
                p.text-muted Danh mục này chưa có sản phẩm
                a.btn.btn-outline-secondary(href="/products") Xem tất cả sản phẩm
              else
                p.text-muted Hiện tại chưa có sản phẩm nào để hiển thị
