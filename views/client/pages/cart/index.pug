extends ../../layouts/default

block main
  .container.py-4
    h2.page-title
      i.fas.fa-shopping-cart.mr-2
      | Giỏ hàng của bạn

    if cartItems && cartItems.length > 0
      .cart-wrapper.row
        .col-lg-8
          .card.border-0.shadow-sm.mb-4
            .card-body.p-0
              .table-responsive
                table.table.table-hover.mb-0.align-middle
                  thead.bg-light
                    tr
                      th.border-0(scope="col" class="tz-auto-775f67") Sản Phẩm
                      th.border-0.text-center(scope="col") Đơn Giá
                      th.border-0.text-center(scope="col") Số Lượng
                      th.border-0.text-center(scope="col") Số Tiền
                      th.border-0.text-center(scope="col")
                  tbody
                    each item in cartItems
                      tr.cart-item(data-product-id=item.product._id)
                        td
                          .d-flex.align-items-center
                            a.mr-3(href=`/products/detail/${item.product.slug}`)
                              if item.product.thumbnail
                                img.rounded(src=item.product.thumbnail alt=item.product.title class="tz-auto-c04e63")
                              else
                                .bg-light.rounded.d-flex.align-items-center.justify-content-center(class="tz-auto-45d243")
                                  i.fas.fa-image
                            div
                              a.text-dark.font-weight-bold(href=`/products/detail/${item.product.slug}` class="tz-auto-52355a")= item.product.title
                              if item.product.discountPercentage && item.product.discountPercentage > 0
                                span.badge.badge-danger.mt-2(class="tz-auto-30fe19") -#{item.product.discountPercentage}%
                        
                        td.text-center.align-middle
                          .font-weight-500(class="tz-auto-0ca503")= item.unitPrice.toLocaleString() + ' ₫'
                          if item.product.discountPercentage && item.product.discountPercentage > 0
                            small.text-muted.d-block(class="tz-auto-9ee620")= item.product.price.toLocaleString() + ' ₫'
                            
                        td.text-center.align-middle
                          .quantity-control.input-group.mx-auto(class="tz-auto-9a1fc6")
                            .input-group-prepend
                              button.btn.btn-light.quantity-minus.px-2(type="button" data-product-id=item.product._id class="tz-auto-6818db") -
                            input.form-control.text-center.border-0.px-0.quantity-input(type="number" value=item.quantity min="1" data-product-id=item.product._id class="tz-auto-306926")
                            .input-group-append
                              button.btn.btn-light.quantity-plus.px-2(type="button" data-product-id=item.product._id class="tz-auto-6818db") +
                              
                        td.text-center.align-middle
                          .font-weight-bold.cart-item-total(class="tz-auto-f1ba3e")= item.itemTotal.toLocaleString() + ' ₫'
                          
                        td.text-center.align-middle
                          button.btn.btn-sm.btn-outline-danger.cart-remove-btn(type="button" data-product-id=item.product._id title="Xóa" class="tz-auto-3e0512")
                            i.fas.fa-trash-alt

        .col-lg-4
          .card.border-0.shadow-sm
            .card-body.p-3
              h5.font-weight-bold.mb-4 Tóm tắt đơn hàng
              
              .d-flex.justify-content-between.mb-3
                span.text-muted Tổng sản phẩm:
                span.font-weight-500= cartItems.length
                
              hr.my-3
              
              .d-flex.justify-content-between.align-items-end.mb-4
                span.font-weight-bold Tổng thanh toán:
                span.font-weight-bold#cartTotalPrice(class="tz-auto-4c011e")= cartTotal.toLocaleString() + ' ₫'
                
              a.btn.btn-primary.w-100.mb-3(href="/cart/checkout" class="tz-auto-5204cc")
                i.fas.fa-credit-card.mr-2
                | Tiến hành thanh toán
                
              a.btn.btn-outline-secondary.w-100(href="/products" class="tz-auto-602659")
                i.fas.fa-arrow-left.mr-2
                | Tiếp tục mua sắm

    else
      .text-center.py-5
        i.fas.fa-shopping-bag.fa-4x.text-muted.mb-4(class="tz-auto-0dbc0f")
        h4.font-weight-bold Giỏ hàng của bạn đang trống!
        p.text-muted.mb-4 Hãy thêm sản phẩm vào giỏ hàng để tiến hành thanh toán
        a.btn.btn-primary(href="/products" class="tz-auto-5204cc")
          i.fas.fa-shopping-bag.mr-2
          | Mua sắm ngay
